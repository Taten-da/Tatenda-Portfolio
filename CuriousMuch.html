<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://api.fontshare.com/v2/css?f[]=switzer@400,600&display=swap" rel="stylesheet">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <title>Curious Much?</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Switzer', sans-serif;
            font-weight: 600;
            background:white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .container {
            max-width: 450px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            height: 100svh;
        }

        .stats-bar {;
            position: relative;
            top: 20px;
            display: flex;
            flex-direction: row;
            justify-content: space-around;
            padding: 15px;
            border: 4px solid #BCBCBC;
            border-radius: 30px;
            height: 60px;
            width: 100%;
        }

        .stat-item {
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 5px;
        }

        .stat-emoji {
            font-size: 1.5rem;
        }

        .stat-value {
            font-family: 'Switzer', sans-serif;
            font-weight: 600;
            font-size: 1.2rem;
            color: #000;
        }

        .stat-label {
            font-family: 'Switzer', sans-serif;
            font-weight: 400;
            font-size: 1.2rem;
            color: #666;
            letter-spacing: -0.5px;
        }

        .header {
            padding: 10px;
            text-align: center;
            color: rgb(0, 0, 0);   
        }

        .header h1 {
            font-family: 'Switzer', sans-serif;
            font-weight: 600;
            letter-spacing: -1px;
            font-size: 2rem;
            margin-bottom: 10px;
            color: rgb(0, 0, 0);
        }

        .progress {
            display: flex;
            gap: 6px;
            justify-content: center;
            margin-bottom: 20px;
        }

        .progress-dot {
            width: 40px;
            height: 15px;
            border-radius: 8px;
            background: #F1F1F1;
            border: 4px solid #BCBCBC;
            transition: all 0.3s;
        }

        .progress-dot.active {
            background: #D5F9D3;
            border: 4px solid #59D657;
            transform: scale(1.1);
        }

        .card-container {
            position: relative;
            width: 100%;
            height: 500px;
        }

        .card {
            position: absolute;
            width: 100%;
            height: 100%;
            background: #E4F2FF;
            border: 5px solid #86C6FF;
            border-radius: 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px;
            cursor: grab;
            user-select: none;
            touch-action: none;
            transition: transform 0.3s ease-out;
        }

        quiz-container {
            display: flex;
            flex-direction: column;
        }

        .card.animating {
            transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55), opacity 0.5s ease;
        }

        .card.entering {
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275), opacity 0.3s ease;
        }

        .card.next-card {
            z-index: 0;
            opacity: 0;
            transform: scale(1);
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        .card.next-card.revealing {
            opacity: 1;
            transform: scale(1);
            transition: scale 0.3s ease, opacity 0.3s ease;
        }

        .card.dragging {
            cursor: grabbing;
            transition: none;
        }

        .card-question {
            font-family: 'Switzer', sans-serif;
            font-weight: 400;
            font-size: 2em;
            letter-spacing: -1px;
            text-align: center;
            color: #000000;
        }

        .swipe-indicators {
            position: absolute;
            display: flex;
            font-family: 'Switzer', sans-serif;
            font-weight: 400;
            font-size: 2rem;
            letter-spacing: -1px;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s;
            bottom: 20px;
        }

        .swipe-indicators.left {
            background-color: #FFCBCB;
            justify-content: center;
            align-items: center;
            border-radius: 20px;
            height: 70px;
            border: 5px solid #FF6F6F;
            width: 90%;
        }

        .swipe-indicators.right {
            background-color: #C4F1C2;
            justify-content: center;
            border-radius: 20px;
            border: 5px solid #59D657;
            align-items: center;
            height: 70px;
            width: 90%;
        }

        .card.swiping-left .swipe-indicators.left,
        .card.swiping-right .swipe-indicators.right {
            opacity: 0.7;
        }

        .results {
            display: none;
            text-align: center;
            color: rgb(0, 0, 0);
            animation: fadeIn 0.5s;
        }

        .results.active {
            display: block;
        }

        .results-emoji {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .results-title {
            font-family: 'Switzer', sans-serif;
            font-weight: 600;
            letter-spacing: -1px;
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .results-score {
            font-family: 'Switzer', sans-serif;
            font-weight: 400;
            font-size: 1.2rem;
            margin-bottom: 20px;
        }

        .results-description {
            font-family: 'Switzer', sans-serif;
            font-weight: 400;
            font-size: 1.2rem;
            max-width: 400px;
            margin: 0 auto 30px;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 500px) {
            .card {
                padding: 30px 20px;
            }

            .card-question {
                font-size: 2rem;
            }

            h1 {
            font-family: 'Switzer', sans-serif;
            font-weight: 600;
            font-size: 42px;
            letter-spacing: -1px;
        }

         
        }

        .start-screen {
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            color: rgb(0, 0, 0);
            gap: 20px;
        }

        h1 {
            font-family: 'Switzer', sans-serif;
            font-weight: 600;
            font-size: 80px;
            letter-spacing: -1px;
            line-height: 75px;
        }

        p {
            font-family: 'Switzer', sans-serif;
            font-weight: 400;
            font-size: 1.3rem;
            letter-spacing: -1px;
            margin-bottom: 40px;
        }

        .start-btn, .restart-btn {
            font-family: 'Switzer', sans-serif;
            font-weight: 400;
            background: #C4F1C2;
            color: #000000;
            border: 4px solid #59D657;
            padding: 8px 25px;
            border-radius: 20px;
            font-size: 1.3rem;
            letter-spacing: -1px;
            cursor: pointer;
            transition: all 0.3s;
            width: fit-content;
        }

        .start-btn:hover, .restart-btn:hover {
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <div class="container">
         <div class="stats-bar" id="statsBar">
            <div class="stat-item">
                <div class="stat-label">Visits</div>
                <div class="stat-value" id="visitCount">0</div>
            </div>
            <div class="stat-item">    
                <div class="stat-label">Completed</div>
                <div class="stat-value" id="completedCount">0</div>        
            </div>
            <div class="stat-item">
               <div class="stat-label">Avg Score</div>
              <div class="stat-value" id="avgScore">0</div>
            </div>
        </div>

        <div class="start-screen" id="startScreen">
            <h1>ðŸ‘€How Curious are you?</h1>
            <p>Do you ask "why" for breakfast and "what if" for dessert? Are questions your cardio?</p>
            <button class="start-btn" onclick="startQuiz()">Lets find out</button>
        </div>

        <div class="quiz-container" id="quizContainer" style="display: none;">
            <div class="header">
                <div class="progress" id="progress"></div>
            </div>
            <div class="card-container" id="cardContainer"></div>
            
        </div>

        <div class="results" id="results"></div>
        <div class="header">
            <p>â¤º Swipe left for NO, Swipe right for YES â†·</p>
        </div>
    </div>

    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDph0klb9jAwHMuKfC7PuGhmR6I4nujna8",
            authDomain: "portfolio-like-counter-47b48.firebaseapp.com",
            projectId: "portfolio-like-counter-47b48",
            storageBucket: "portfolio-like-counter-47b48.appspot.com",
            messagingSenderId: "523939149509",
            appId: "YOUR_APP_ID" 
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        const questions = [
            "When you see a \"Do Not Touch\" signâ€¦ do you feel an itch in your fingers?",
            "Have you ever Googled something mid-conversation just to prove (or disprove) a point?",
            "Do you sometimes end up 12 tabs deep from your original search topic?",
            "Do you read \"About this company\" pages for fun?",
            "When someone says, \"It's complicated,\" do you immediately want them to explain exactly how?",
            "Do you prefer mystery podcasts over true-crime because \"there's still something to figure out\"?",
            "Have you ever taken apart a gadget just to \"see how it works\"â€¦ and maybe not quite put it back together?",
            "Do you ask questions during movies? (Be honest â€” you know who you are.)",
            "Do you secretly enjoy being wrong because it means you've learned something new?",
            "Do your friends sigh before saying, \"Okay, long story shortâ€¦\" because they know you'll ask for the long version?"
        ];

        const scoringLevels = [
            { min: 0, max: 1, emoji: "ðŸªµ", title: "The Log", description: "You're calm, groundedâ€¦ possibly asleep. Curiosity's not your thing â€” yet." },
            { min: 2, max: 3, emoji: "â˜•", title: "The Observer", description: "You'll peek, but only from a safe distance. Mildly interested in \"interesting.\"" },
            { min: 4, max: 5, emoji: "ðŸ•µï¸", title: "The Detective-in-Training", description: "You've got the instinct â€” just need a case worth solving." },
            { min: 6, max: 7, emoji: "ðŸ”", title: "The Sleuth", description: "Questions are your cardio. You dig deep and rarely stop at surface level." },
            { min: 8, max: 9, emoji: "ðŸ§ª", title: "The Experimenter", description: "You touch the red button on purpose. Risky? Sure. Worth it? Absolutely." },
            { min: 10, max: 10, emoji: "ðŸš€", title: "The Wonder Junkie", description: "You ask \"why\" for breakfast and \"what if\" for dessert. Curiosity practically runs your life." }
        ];

        let currentQuestion = 0;
        let score = 0;
        let isDragging = false;
        let currentCard = null;
        let nextCard = null;

        // Load stats from Firebase
        async function loadStats() {
            try {
                const statsDoc = await db.collection('quiz-stats').doc('curiosity-quiz').get();
                if (statsDoc.exists) {
                    const data = statsDoc.data();
                    document.getElementById('visitCount').textContent = data.visits || 0;
                    document.getElementById('completedCount').textContent = data.completed || 0;
                    const avgScore = data.totalScore && data.completed ? (data.totalScore / data.completed).toFixed(1) : 0;
                    document.getElementById('avgScore').textContent = avgScore;
                }
            } catch (error) {
                console.error('Error loading stats:', error);
            }
        }

        // Increment visit count
        async function incrementVisits() {
            try {
                const statsRef = db.collection('quiz-stats').doc('curiosity-quiz');
                await db.runTransaction(async (transaction) => {
                    const doc = await transaction.get(statsRef);
                    const currentVisits = doc.exists ? (doc.data().visits || 0) : 0;
                    transaction.set(statsRef, {
                        visits: currentVisits + 1
                    }, { merge: true });
                });
                await loadStats();
            } catch (error) {
                console.error('Error incrementing visits:', error);
            }
        }

        // Record quiz completion
        async function recordCompletion(finalScore) {
            try {
                const statsRef = db.collection('quiz-stats').doc('curiosity-quiz');
                await db.runTransaction(async (transaction) => {
                    const doc = await transaction.get(statsRef);
                    const data = doc.exists ? doc.data() : { completed: 0, totalScore: 0 };
                    transaction.set(statsRef, {
                        completed: (data.completed || 0) + 1,
                        totalScore: (data.totalScore || 0) + finalScore,
                        lastUpdated: firebase.firestore.FieldValue.serverTimestamp()
                    }, { merge: true });
                });
                await loadStats();
            } catch (error) {
                console.error('Error recording completion:', error);
            }
        }

        // Initialize on page load
        window.addEventListener('load', async () => {
            await loadStats();
            await incrementVisits();
        });

        function startQuiz() {
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('quizContainer').style.display = 'block';
            initQuiz();
        }

        function initQuiz() {
            currentQuestion = 0;
            score = 0;
            createProgressDots();
            createCard();
        }

        function createProgressDots() {
            const progress = document.getElementById('progress');
            progress.innerHTML = '';
            for (let i = 0; i < questions.length; i++) {
                const dot = document.createElement('div');
                dot.className = 'progress-dot';
                if (i === 0) dot.classList.add('active');
                progress.appendChild(dot);
            }
        }

        function updateProgress() {
            const dots = document.querySelectorAll('.progress-dot');
            dots.forEach((dot, i) => {
                if (i <= currentQuestion) {
                    dot.classList.add('active');
                } else {
                    dot.classList.remove('active');
                }
            });
        }

        function createCard() {
            const container = document.getElementById('cardContainer');

            if (currentQuestion >= questions.length) {
                showResults();
                return;
            }

            if (nextCard) {
                nextCard.remove();
                nextCard = null;
            }

            const card = document.createElement('div');
            card.className = 'card entering';
            card.style.zIndex = '2';
            card.innerHTML = `
                <div class="swipe-indicators left">Nope</div>
                <div class="swipe-indicators right">That's me</div>
                <div class="card-question">${questions[currentQuestion]}</div>
            `;

            container.appendChild(card);
            currentCard = card;

            setTimeout(() => {
                card.style.opacity = '1';
                card.style.transform = 'scale(1)';
            }, 10);

            setTimeout(() => {
                card.classList.remove('entering');
            }, 300);

            if (currentQuestion + 1 < questions.length) {
                nextCard = document.createElement('div');
                nextCard.className = 'card next-card';
                nextCard.style.zIndex = '1';
                nextCard.innerHTML = `
                    <div class="swipe-indicators left">NO</div>
                    <div class="swipe-indicators right">YES</div>
                    <div class="card-question">${questions[currentQuestion + 1]}</div>
                `;
                container.appendChild(nextCard);
            }

            setupDragListeners(card);
        }

        function setupDragListeners(card) {
            let initialX, initialY, currentX = 0, currentY = 0;
            let dragListeners = {};

            const onStart = (e) => {
                isDragging = true;
                card.classList.add('dragging');
                
                const clientX = e.type.includes('mouse') ? e.clientX : e.touches[0].clientX;
                const clientY = e.type.includes('mouse') ? e.clientY : e.touches[0].clientY;
                
                initialX = clientX - currentX;
                initialY = clientY - currentY;
            };

            const onMove = (e) => {
                if (!isDragging) return;
                e.preventDefault();

                const clientX = e.type.includes('mouse') ? e.clientX : e.touches[0].clientX;
                const clientY = e.type.includes('mouse') ? e.clientY : e.touches[0].clientY;

                currentX = clientX - initialX;
                currentY = clientY - initialY;

                const rotation = currentX / 20;
                card.style.transform = `translate(${currentX}px, ${currentY}px) rotate(${rotation}deg)`;

                if (nextCard) {
                    const dragProgress = Math.min(Math.abs(currentX) / 150, 1);
                    const scale = 0.85 + (dragProgress * 0.1);
                    const opacity = dragProgress;
                    
                    if (dragProgress > 0.1) {
                        nextCard.classList.add('revealing');
                    }
                    
                    nextCard.style.opacity = opacity;
                    nextCard.style.transform = `scale(${scale})`;
                }

                if (currentX < -50) {
                    card.classList.add('swiping-left');
                    card.classList.remove('swiping-right');
                } else if (currentX > 50) {
                    card.classList.add('swiping-right');
                    card.classList.remove('swiping-left');
                } else {
                    card.classList.remove('swiping-left', 'swiping-right');
                }
            };

            const onEnd = () => {
                if (!isDragging) return;
                isDragging = false;
                card.classList.remove('dragging');

                if (Math.abs(currentX) > 150) {
                    const direction = currentX > 0 ? 'yes' : 'no';
                    animateSwipe(card, direction);
                    cleanup();
                } else {
                    card.style.transform = 'translate(0px, 0px) rotate(0deg)';
                    card.classList.remove('swiping-left', 'swiping-right');
                    
                    if (nextCard) {
                        nextCard.classList.remove('revealing');
                        nextCard.style.opacity = '0';
                        nextCard.style.transform = 'scale(0.85)';
                    }
                }

                currentX = 0;
                currentY = 0;
            };

            const cleanup = () => {
                card.removeEventListener('mousedown', dragListeners.onStart);
                card.removeEventListener('touchstart', dragListeners.onStart);
                document.removeEventListener('mousemove', dragListeners.onMove);
                document.removeEventListener('touchmove', dragListeners.onMove);
                document.removeEventListener('mouseup', dragListeners.onEnd);
                document.removeEventListener('touchend', dragListeners.onEnd);
            };

            dragListeners = { onStart, onMove, onEnd };

            card.addEventListener('mousedown', onStart);
            card.addEventListener('touchstart', onStart);
            document.addEventListener('mousemove', onMove);
            document.addEventListener('touchmove', onMove, { passive: false });
            document.addEventListener('mouseup', onEnd);
            document.addEventListener('touchend', onEnd);
        }

        function animateSwipe(card, answer) {
            const direction = answer === 'yes' ? 1 : -1;
            
            if (answer === 'yes') {
                score++;
            }

            card.classList.add('animating');
            card.style.transform = `translate(${direction * 1000}px, 0px) rotate(${direction * 30}deg)`;
            card.style.opacity = '0';

            setTimeout(() => {
                card.remove();
                currentQuestion++;
                updateProgress();
                createCard();
            }, 500);
        }

        async function showResults() {
            document.getElementById('quizContainer').style.display = 'none';
            const resultsDiv = document.getElementById('results');
            
            const level = scoringLevels.find(l => score >= l.min && score <= l.max);
            
            resultsDiv.innerHTML = `
                <div class="results-emoji">${level.emoji}</div>
                <div class="results-title">${level.title}</div>
                <div class="results-score">Score: ${score} / ${questions.length}</div>
                <div class="results-description">${level.description}</div>
                <button class="restart-btn" onclick="restartQuiz()">Take Quiz Again</button>
            `;
            
            resultsDiv.classList.add('active');

            // Record completion in Firebase
            await recordCompletion(score);
        }

        function restartQuiz() {
            document.getElementById('results').classList.remove('active');
            document.getElementById('startScreen').style.display = 'block';
        }
    </script>
</body>
</html>